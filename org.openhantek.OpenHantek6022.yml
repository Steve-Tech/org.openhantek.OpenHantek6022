app-id: org.openhantek.OpenHantek6022
# for qt libs
runtime: org.kde.Platform
runtime-version: 5.15-25.08
sdk: org.kde.Sdk
command: OpenHantek
finish-args:
  - --share=ipc
  - --socket=x11
  # needed to get access to scope on usb
  - --device=all
  # needed to save screenshots and settings
  - --filesystem=home
rename-desktop-file: org.openhantek.OpenHantek.desktop
rename-icon: OpenHantek

modules:
  - shared-modules/libusb/libusb.json

  - name: appdata
    buildsystem: simple
    build-commands:
      - install -Dt $FLATPAK_DEST/share/metainfo/ org.openhantek.OpenHantek6022.metainfo.xml
    sources:
      - type: file
        path: org.openhantek.OpenHantek6022.metainfo.xml

  - name: openhantek
    buildsystem: cmake
    sources:
      - type: git
        url: https://github.com/OpenHantek/OpenHantek6022
        tag: 3.4.0
        commit: c58e155fa1a1d78a5f3d5bab6c3e80098577bb15
        x-checker-data:
          type: git
          tag-pattern: ^([\d.]+)$
